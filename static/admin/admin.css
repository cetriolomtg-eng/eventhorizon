/* ============================
   EventHorizon ‚Äî Admin UI CSS
   Revision: 2025-10-02 (8pt grid, radius aligned)
   Note: drop-in, class names invariati.
============================ */

/* ---------- Design Tokens ---------- */
:root{
  /* Palette */
  --bg:#0e0f1a;
  --card:#161927;
  --text:#eaeef8;
  --muted:#9aa4c7;
  --acc:#6c5ce7;
  --border:#2a2f44;

  /* Semantica UI */
  --field-bg:#0c0f1c;
  --field-border:#3a4060;
  --ring:#3b4a7a;
  --danger:#c62828;
  --warn:#705b2a;
  --warn-bg:#4a3b1a;
  --success:#2e7d32;

  /* Raggi (8pt) */
  --radius-8:8px;
  --radius-16:16px;
  --radius-pill:999px;

  /* Ombre e layout */
  --shadow-1:0 6px 16px rgba(0,0,0,.35);
  --shadow-2:0 10px 28px rgba(0,0,0,.25);
  --maxw:1100px;

  /* Scala 8pt */
  --s-8:8px;
  --s-16:16px;
  --s-24:24px;
  --s-32:32px;

  /* Scrollbar */
  --scrollbar-thumb:#2e3550;
  --scrollbar-track:#1a1f33;

  /* Transizioni */
  --t-fast:.12s ease;
  --t-base:.18s ease;
}

/* ---------- Base ---------- */
*,
*::before,
*::after{ box-sizing:border-box }

html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, Segoe UI, Roboto, Ubuntu, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

img{ display:block; max-width:100%; height:auto }

.wrap{ max-width:var(--maxw); margin:0 auto; padding:var(--s-16) }

header{
  display:flex; gap:var(--s-16);
  align-items:center; justify-content:space-between;
  margin-bottom:var(--s-16);
}

/* Evita overflow nei layout flessibili */
.row{ display:flex; gap:var(--s-16); align-items:center; flex-wrap:wrap }
.row > *{ min-width:0 } /* importante per evitare testi che spingono fuori */
.justify-between{ justify-content:space-between }
.align-center{ align-items:center }
.gap-8{ gap:var(--s-8) }
.mb-8{ margin-bottom:var(--s-8) }
.mt-8{ margin-top:var(--s-8) }
/* Utility: valori allineati alla scala 8pt */
.mt-10{ margin-top:var(--s-8) }
.mt-20{ margin-top:var(--s-16) }
.ml-14{ margin-left:var(--s-16) }
.m-0{ margin:0 }

/* ---------- Card & Grid ---------- */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-16);
  padding:var(--s-16);
  box-shadow:var(--shadow-2);
}
.card--row{ padding:var(--s-8) }

.grid{
  display:grid;
  grid-template-columns:280px minmax(0,1fr);
  gap:var(--s-16);
}
@media (max-width:1366px){
  .grid{ grid-template-columns:240px minmax(0,1fr) }
}
@media (max-width:1024px){
  .grid{ grid-template-columns:1fr }
  .list{ max-height:none }
}

/* ---------- List & Items ---------- */
.list{
  max-height:calc(100vh - 220px);
  overflow:auto;
  padding-block-end:var(--s-16);
  scrollbar-gutter:stable;
}
.list::-webkit-scrollbar{ width:10px }
.list::-webkit-scrollbar-thumb{ background:var(--scrollbar-thumb); border-radius:8px }
.list::-webkit-scrollbar-track{ background:var(--scrollbar-track) }

.item{
  padding:var(--s-8) var(--s-16);
  border-radius:var(--radius-8);
  cursor:pointer;
  display:flex; flex-direction:column; gap:2px;
  border:1px solid transparent;
  font-size:14px;
  transition:background-color var(--t-base), border-color var(--t-base), filter var(--t-fast), transform var(--t-fast);
}
.item:hover{ background:#20253a }
.item:active{ transform:translateY(1px) }
.item.active{ background:#232a45; border-color:#3c4570 }
.item:focus{ outline:none }
.item:focus-visible{
  box-shadow:0 0 0 2px var(--bg), 0 0 0 4px var(--ring);
}

/* Meta text */
.meta{ font-size:11px; color:var(--muted); min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }

/* ---------- Typography & Labels ---------- */
label{
  display:block;
  font-size:13px;
  color:#c8d2f2;
  margin-bottom:var(--s-8);
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap; /* niente label che strabordano */
}

/* ---------- Form Controls ---------- */
input[type="text"],
input[type="date"],
input[type="datetime-local"],
select,
textarea{
  width:100%;
  padding:var(--s-8) var(--s-16);
  border-radius:var(--radius-8);
  border:1px solid var(--field-border);
  background:var(--field-bg);
  color:#eaf;
  line-height:1.4;
  min-height:40px;
  min-width:0; /* evita overflow in flex/grid */
  transition:border-color var(--t-base), box-shadow var(--t-base), background-color var(--t-base);
}

input::placeholder,
textarea::placeholder{ color:#b5bfdf }

input:focus,
textarea:focus,
select:focus{ outline:none }

input:focus-visible,
textarea:focus-visible,
select:focus-visible{
  box-shadow:0 0 0 2px var(--bg), 0 0 0 4px var(--ring);
}

input:disabled,
textarea:disabled,
select:disabled{ opacity:.6; cursor:not-allowed }

input[aria-invalid="true"],
textarea[aria-invalid="true"],
select[aria-invalid="true"],
.is-invalid{
  border-color:#c77;
  box-shadow:0 0 0 2px var(--bg), 0 0 0 4px rgba(204,119,119,.4);
}

/* Textarea contenute e coerenti */
textarea{
  height:320px;           /* contenuta */
  max-width:100%;
  resize:vertical;        /* niente trascinamento orizzontale */
  overflow:auto;
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}
.textarea--sm{ height:200px }

/* Due colonne armonizzate */
.two{
  display:grid;
  grid-template-columns:minmax(0,1fr) minmax(0,1fr);
  gap:var(--s-16);
}

/* ---------- Helper Text ---------- */
.muted{ color:var(--muted); font-size:12px }

/* ---------- Pills & Chips ---------- */
.pill{
  display:inline-block;
  padding:2px var(--s-16);
  border-radius:var(--radius-pill);
  background:#263157;
  color:#cfe3ff;
  font-size:12px;
  border:1px solid #35406d;
}

.chip{
  display:inline-block;
  background:#22304a;
  border:1px solid #35406d;
  color:#cfe3ff;
  padding:2px var(--s-16);
  border-radius:var(--radius-pill);
  font-size:12px;
  transition:background-color var(--t-base), border-color var(--t-base), filter var(--t-fast);
}
.chip .x{
  background:transparent; border:0; color:#cfe3ff;
  cursor:pointer; margin-left:var(--s-8);
}
.chip .x:hover{ color:#fff }
.chip .x:focus{ outline:none }
.chip .x:focus-visible{
  box-shadow:0 0 0 2px var(--bg), 0 0 0 4px var(--ring);
}

.tags-saved{ display:flex; gap:var(--s-8); flex-wrap:wrap }

/* ---------- Buttons ---------- */
.btn{
  padding:var(--s-8) var(--s-16);
  border-radius:var(--radius-8);
  border:1px solid transparent;
  background:#223336;
  color:#cfe3ff;
  cursor:pointer;
  transition:filter var(--t-fast), transform var(--t-fast), background-color var(--t-base), border-color var(--t-base), box-shadow var(--t-base);
  user-select:none;
  line-height:1;
}
.btn:hover{ filter:brightness(1.08) }
.btn:active{ transform:translateY(1px) }
.btn:focus{ outline:none }
.btn:focus-visible{
  box-shadow:0 0 0 2px var(--bg), 0 0 0 4px var(--ring);
}
.btn:disabled{ opacity:.6; cursor:not-allowed }

.btn.primary{ background:var(--acc); color:#fff }
.btn.primary:hover{ filter:brightness(1.06) }

.btn.danger{ background:var(--danger); color:#fff }
.btn.danger:hover{ filter:brightness(1.05) }

/* ---------- Links Composer ---------- */
.links-list{ display:grid; gap:var(--s-8); margin-top:var(--s-8) }
.link-row{
  display:flex; align-items:center; gap:var(--s-16);
  padding:var(--s-8);
}
.link-row .link-label{ min-width:120px; flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
.link-row .link-href{ min-width:200px; flex:2; min-width:0 }
.link-row .link-class{ min-width:120px; flex:1; min-width:0 }
.link-row .link-order{ width:90px }
.link-row .link-primary-wrap{ display:flex; align-items:center; gap:var(--s-8) }

/* ---------- Asset Browser ---------- */
.asset-browser{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-16);
  padding:var(--s-8);
  max-height:240px;
  overflow:auto;
  margin-top:var(--s-8);
  box-shadow:var(--shadow-1);
}
.asset-browser .asset-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:var(--s-16);
}
.asset-browser .asset{
  display:flex; flex-direction:column; gap:var(--s-8); cursor:pointer;
  transition:filter var(--t-fast), transform var(--t-fast);
}
.asset-browser .asset:hover{ filter:brightness(1.04) }
.asset-browser .asset:active{ transform:translateY(1px) }
.asset-browser .asset img{
  width:100%; height:90px; object-fit:cover;
  border-radius:var(--radius-8);
  border:1px solid var(--border);
}

/* ---------- Draft + Nav ---------- */
.item.is-draft{ background:#231f33; border-color:#5c3f8a }
.item.is-draft strong{ color:#e7d7ff }
.pill--warn{ background:var(--warn-bg); border-color:var(--warn); color:#ffd }
.item--dir strong{ color:#ffd666 }
.item--dir::before{ content:"üìÅ"; margin-right:6px }

/* ---------- Notices ---------- */
.notice{
  position:fixed; right:var(--s-16); top:var(--s-16);
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-16);
  padding:var(--s-16);
  color:var(--text);
  z-index:9999;
  box-shadow:var(--shadow-1);
  display:flex; align-items:center; gap:var(--s-16);
}
.notice .spinner{
  width:16px; height:16px;
  border:2px solid #455;
  border-top-color:#9cf;
  border-radius:var(--radius-16);
  animation:spin .8s linear infinite;
}
@keyframes spin{ to{ transform:rotate(360deg) } }

/* ---------- Utilities ---------- */
.hidden{ display:none }
.status{ font-size:12px; color:#a8b3e9 }
.asset-browser .asset .meta{ font-size:11px }

.select-none{ user-select:none }
.visually-hidden{
  position:absolute !important;
  width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}

/* ---------- Reduced Motion ---------- */
@media (prefers-reduced-motion:reduce){
  *{ animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; scroll-behavior:auto !important }
  .notice .spinner{ animation:none }
}

/* ---------- Fallback focus per browser legacy ---------- */
@supports not selector(:focus-visible){
  .item:focus,
  .btn:focus,
  input:focus,
  textarea:focus,
  select:focus{
    box-shadow:0 0 0 2px var(--bg), 0 0 0 4px var(--ring);
  }
}

/* ---------- Stato & navigation (draft) ---------- */
.item--dir strong{ color:#ffd666 }
