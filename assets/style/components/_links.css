/* ============================================================
   Links.css - Carousel universale mobile-first
   ============================================================ */
.links {
  /* Tema sezione (scuro) */
  --links-bg: var(--neutral-900, #0E0F1A);
  --links-text: var(--neutral-50, #F3F2F7);
  background: var(--links-bg);
  color: var(--links-text);
  padding: clamp(32px, 6vw, 72px) 0;
  position: relative;
  overflow: hidden;

  /* Container identico a Cards (4 colonne virtuali) */
  --card-w: 320px;
  --grid-gap: 16px;
  --container-pad-x: var(--container-pad-x, 16px);
  --container-max: calc(
    (4 * var(--card-w)) +
    (3 * var(--grid-gap)) +
    (2 * var(--container-pad-x, 16px))
  );

  /* Parametri autoplay letti da links.js - responsivi */
  --links-auto-speed: 16;   /* px/s - più lento su mobile */
  --links-auto-ignore-rmw: 0; /* 0 = rispetta "Riduci animazioni" */
}
@media (min-width: 480px){
  .links{
    --card-w: 340px;
    --grid-gap: 20px;
    --links-auto-speed: 20;
    --container-max: calc(
      (4 * var(--card-w)) +
      (3 * var(--grid-gap)) +
      (2 * var(--container-pad-x, 16px))
    );
  }
}
@media (min-width: 768px){
  .links{
    --links-auto-speed: 28;
  }
}
@media (min-width: 1024px){
  .links{
    --card-w: 360px;
    --grid-gap: 22px;
    --links-auto-speed: 32;
    --container-max: calc(
      (4 * var(--card-w)) +
      (3 * var(--grid-gap)) +
      (2 * var(--container-pad-x, 16px))
    );
  }
}

.links__inner{
  width: min(100%, var(--container-max));
  margin-inline: auto;
  padding-inline: var(--container-pad-x, 16px); /* allineato a Cards */
}

.links__title{
  margin: 0 0 16px;               /* stesso spacing del titolo Cards */
  font-family: var(--font-sans, "Lexend Deca", system-ui, sans-serif);
  font-weight: var(--fw-black, 900);
  font-size: var(--fs-h2, clamp(1.5rem, 1.1vw + 1.2rem, 2rem));
  line-height: var(--lh-tight, 1.15);
  color: var(--links-text);
}

/* =========================
   Track: carousel orizzontale su tutti i dispositivi
   ========================= */
.links__carousel{
  position: relative;
  overflow: hidden; /* viewport per edge-fade */
}

.links__track{
  list-style: none;
  padding-left: 0;
  margin: 0;

  /* Carousel sempre attivo - mobile first */
  display: flex;
  flex-wrap: nowrap;              /* riga singola per carosello */
  justify-content: flex-start;    /* fondamentale per loop infinito */
  align-items: stretch;

  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;          /* Firefox: nasconde scrollbar */
  scroll-snap-type: x proximity;  /* snap dolce */

  gap: var(--grid-gap);
  padding-bottom: 8px;            /* evita ritaglio ombre */
  padding-inline: var(--container-pad-x, 16px); /* padding laterale */

  overscroll-behavior-x: contain;
  scrollbar-gutter: stable both-edges;

  cursor: grab;
}
.links__track::-webkit-scrollbar{ display: none; } /* WebKit: nasconde scrollbar */
.links__track > li{ list-style: none; }
.links__track > li::marker{ content: ''; }

/* =========================
   Card compatte (chiare) — altezza uniforme
   ========================= */
.link-card{
  --link-w: 200px;                 /* mobile: più compatte */
  flex: 0 0 var(--link-w);
  max-width: var(--link-w);
  box-sizing: border-box;
  scroll-snap-align: start;        /* snap per ogni card */
}

/* Breakpoint responsive per larghezza card */
@media (min-width: 480px){
  .link-card{ --link-w: 220px; }
}
@media (min-width: 768px){
  .link-card{ --link-w: 240px; }
}
@media (min-width: 1024px){
  .link-card{ --link-w: 260px; }
}

.link-card__link{
  --link-h: 88px;                  /* mobile: più compatto */
  height: var(--link-h);
  min-height: 88px;                /* garantisce touch target */

  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;

  background: #ffffff;             /* cards chiare su sezione scura */
  color: var(--text-900, #0E0F1A);
  border: 1px solid color-mix(in oklab, var(--indigo-900, #2F2760) 10%, transparent);
  border-radius: 12px;
  box-shadow: 0 1px 2px rgba(0,0,0,.06);

  text-decoration: none;
  /* niente transform nell'hover (zero "saltelli") */
  transition: box-shadow 160ms ease, background-color 160ms ease;
  -webkit-tap-highlight-color: transparent;
  overflow: hidden;                /* sicurezza anti overflow */
}

/* Altezza responsive */
@media (min-width: 480px){
  .link-card__link{ --link-h: 92px; padding: 14px 15px; gap: 11px; }
}
@media (min-width: 768px){
  .link-card__link{ --link-h: 96px; padding: 14px 16px; gap: 12px; }
}

.link-card__logo{
  display: block;
  width: 36px;
  height: 36px;
  aspect-ratio: 1 / 1;
  object-fit: contain;
  flex: 0 0 auto;
}
@media (min-width: 480px){ .link-card__logo{ width: 40px; height: 40px; } }
@media (min-width: 768px){ .link-card__logo{ width: 44px; height: 44px; } }
@media (min-width: 1024px){ .link-card__logo{ width: 48px; height: 48px; } }
@media (min-width: 1280px){ .link-card__logo{ width: 52px; height: 52px; } }

.link-card__meta{ display: grid; min-width: 0; }

.link-card__name,
.link-card__copy{
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
}
.link-card__name{
  -webkit-line-clamp: 2;           /* max 2 righe */
  line-height: 1.2;
  font-weight: var(--fw-semibold, 600);
  font-size: clamp(0.95rem, 1.8vw, 1rem);
  margin-bottom: 2px;
  color: var(--text-900, #0E0F1A);
}
.link-card__copy{
  -webkit-line-clamp: 1;           /* singola riga */
  opacity: 0.85;
  line-height: 1.3;
  font-size: clamp(0.8rem, 1.5vw, 0.9rem);
  color: var(--text-800, #22232C);
}

/* Hover & Focus (senza movimento) */
.link-card__link:hover{
  box-shadow: 0 6px 16px rgba(0,0,0,.12);
  background: color-mix(in oklab, white 92%, color-mix(in oklab, var(--indigo-900, #2F2760) 6%, transparent));
}
.link-card__link:focus-visible{
  outline: 2px solid var(--gold-500, #E0A402);
  outline-offset: 3px;
}

/* Motion safety */
@media (prefers-reduced-motion: reduce){
  .link-card__link{ transition: none; }
}

/* =========================
   Edge-fade universale (tutti i dispositivi)
   ========================= */

/* Edge-fade ai lati del viewport (fallback gradient) */
.links__carousel::before,
.links__carousel::after{
  content: "";
  position: absolute;
  top: 0; bottom: 0;
  width: 24px;                   /* mobile: dissolvenza più leggera */
  pointer-events: none;
  z-index: 1;
}
.links__carousel::before{
  left: 0;
  background: linear-gradient(to right, var(--links-bg) 0%, rgba(14,15,26,0) 100%);
}
.links__carousel::after{
  right: 0;
  background: linear-gradient(to left, var(--links-bg) 0%, rgba(14,15,26,0) 100%);
}

/* Desktop: dissolvenza più intensa */
@media (min-width: 768px){
  .links__carousel::before,
  .links__carousel::after{
    width: 32px;
  }
}
@media (min-width: 1024px){
  .links__carousel::before,
  .links__carousel::after{
    width: 36px;
  }
}

/* =========================
   UX drag + init fade
   ========================= */
/* Drag: cursore e blocco click durante trascinamento */
.links__track.is-dragging { cursor: grabbing; user-select: none; }
.links__track.is-dragging .link-card__link { pointer-events: none; }

/* Fade-in all'abilitazione carosello (gestito dal JS) */
.links__track.is-initializing { opacity: 0; }
.links__track.is-ready { opacity: 1; transition: opacity 200ms ease; }
@media (prefers-reduced-motion: reduce){
  .links__track.is-ready { transition: none; }
}

/* =========================
   Variante: Link Card Full Logo
   ========================= */
.link-card.link-card--full .link-card__link {
  justify-content: center;
  padding: 0;               /* niente padding interno */
}

.link-card.link-card--full .link-card__logo {
  width: 72px;
  height: 72px;
  margin: auto;
}
@media (min-width: 768px){
  .link-card.link-card--full .link-card__logo {
    width: 88px;
    height: 88px;
  }
}
@media (min-width: 1280px){
  .link-card.link-card--full .link-card__logo {
    width: 100px;
    height: 100px;
  }
}

/* Nascondi meta info */
.link-card.link-card--full .link-card__meta {
  display: none;
}

.links .link-card__name{ letter-spacing: var(--trk-slight); }
.links .link-card__copy{ letter-spacing: 0; }

/* Edge-fade via mask-image (più performante, tutti i dispositivi) */
@supports ((-webkit-mask-image: linear-gradient(to right, rgba(0,0,0,0), #000)) or
           (mask-image: linear-gradient(to right, rgba(0,0,0,0), #000))) {
  .links__carousel{
    position: relative;
    /* Mobile: 24px fade */
    -webkit-mask-image: linear-gradient(to right,
      transparent 0,
      #000 24px,
      #000 calc(100% - 24px),
      transparent 100%);
    mask-image: linear-gradient(to right,
      transparent 0,
      #000 24px,
      #000 calc(100% - 24px),
      transparent 100%);
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
  }

  /* Tablet: 32px fade */
  @media (min-width: 768px){
    .links__carousel{
      -webkit-mask-image: linear-gradient(to right,
        transparent 0,
        #000 32px,
        #000 calc(100% - 32px),
        transparent 100%);
      mask-image: linear-gradient(to right,
        transparent 0,
        #000 32px,
        #000 calc(100% - 32px),
        transparent 100%);
    }
  }

  /* Desktop: 36px fade */
  @media (min-width: 1024px){
    .links__carousel{
      -webkit-mask-image: linear-gradient(to right,
        transparent 0,
        #000 36px,
        #000 calc(100% - 36px),
        transparent 100%);
      mask-image: linear-gradient(to right,
        transparent 0,
        #000 36px,
        #000 calc(100% - 36px),
        transparent 100%);
    }
  }

  /* Evita doppio effetto quando la mask è disponibile */
  .links__carousel::before,
  .links__carousel::after{
    display: none !important;
  }
}
