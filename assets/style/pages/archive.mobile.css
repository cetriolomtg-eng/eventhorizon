/* ============================================================
   archive.mobile.css — regole mobile (≤1023.98px)
   ============================================================ */

/* -------- Bottom Sheet: stato base (ovunque) -------- */
.archive-sheet,
.archive-sheet-backdrop{ display: none; }
.archive-sheet.is-open,
.archive-sheet-backdrop.is-open{ display: block; }

/* -------- Search form: schermi molto piccoli -------- */
@media (max-width: 479.98px){
  .archive-search__btn{ width: auto; }
}

/* -------- Layout archivio: mobile / tablet -------- */
@media (max-width: 1023.98px){
  /* Nascondi il nuovo pannello desktop su mobile */
  .item-panel{ display: none !important; }
  /* Form: input | submit | filtro | reset */
  .archive-search .archive-search__form{
    grid-template-columns: 1fr auto auto auto;
    gap: 8px;
  }
  /* Quando i filtri sono aperti: mantieni bottoni in riga, select sotto */
  .archive-search .archive-search__form.has-filter-open{
    grid-template-rows: auto auto;
  }

  /* Thumb più piccolo su mobile (mantiene 16:9) */
  .archive-item .item{
    grid-template-columns: 112px 1fr;
  }
  .item-thumb{
    width: 112px;
    height: auto;
    aspect-ratio: 16 / 9;
    align-self: center;
  }

  /* Spazio minimo tra testo e chevron '>' dello sheet */
  .item-overline,
  .item-title{
    padding-inline-end: calc(36px + 6px);
  }

  /* Bottone filtro compatto */
  .archive-search__filter-toggle{
    height: 44px; min-height: 44px; min-width: 44px;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.16);
    background: rgba(255,255,255,0.10);
    color: #fff; cursor: pointer; display: inline-grid; place-items: center;
  }
  .archive-search__filter-toggle .icon{ width: 20px; height: 20px; filter: brightness(0) invert(1); }

  /* Select nascosto di default su mobile; appare quando attivo */
  .archive-search__select{ display: none; }
  .archive-search__form.has-filter-open .archive-search__select{
    display: block;
    grid-column: 1 / -1;
    grid-row: 2;
  }

  /* (thumb centrato gestito sopra) */

  /* Riduci dimensioni testi su mobile */
  .item-overline{ font-size: clamp(.70rem, .3vw + .64rem, .78rem); }
  .item-title{ font-size: clamp(.92rem, 0.9vw + .08rem, 1.05rem); }

  /* Summary/chevron sulla riga del titolo, a destra */

  /* Il contenuto del dropdown non si vede su mobile (gestito dal Bottom Sheet) */
  .item-desc{ display: none !important; }

  /* Stato visivo chevron quando il bottom sheet è aperto */
  .item.is-sheet-open .item-actions-summary::after{ transform: rotate(90deg); }

  /* -------- Bottom Sheet (MOBILE) -------- */
  body.is-sheet-open{ overflow: hidden; touch-action: none; }

  /* Cerchio effetto vetro sotto l'icona Play nei thumbnail video */
  .archive-item.is-video .item-thumb{ position: relative; }
  .archive-item.is-video .item-thumb::before{
    content: "";
    position: absolute;
    left: 50%; top: 50%;
    width: 36px; height: 36px;
    transform: translate(-50%, -50%);
    border-radius: 999px;
    background: rgba(255,255,255,0.16);
    -webkit-backdrop-filter: blur(6px) saturate(1.2);
    backdrop-filter: blur(6px) saturate(1.2);
    box-shadow: 0 2px 8px rgba(0,0,0,.25) inset, 0 2px 6px rgba(0,0,0,.20);
    z-index: 1;
  }
  .archive-item.is-video .item-thumb::after{ z-index: 2; }

  .archive-sheet-backdrop{
    position: fixed; inset: 0;
    background: rgba(0,0,0,.4);
    opacity: 0; pointer-events: none;
    transition: opacity 160ms ease;
    z-index: 9998;
  }
  @media (max-width: 1023.98px){
  .archive-sheet{
    position: fixed; left:0; right:0; bottom:0;
    transform: translateY(100%);
    /* fallback solido per browser senza color-mix */
    background: #0F1120;
    /* mix moderno per browser compatibili */
    background: color-mix(in oklab, #0F1120 92%, #FFFFFF 8%);
    border-top-left-radius: 16px; border-top-right-radius: 16px;
    box-shadow: 0 -12px 30px rgba(0,0,0,.35);
    height: var(--sheet-height, 65vh);
    max-height: 92vh;
    display: grid; grid-template-rows: auto 1fr auto;
    z-index: 9999;
    transition: transform 200ms ease, height 160ms ease;
    will-change: transform, height;
  }
   }
  .archive-sheet.is-dragging{ transition: none !important; }
  .archive-sheet.is-dragging .archive-sheet__handle{ cursor: grabbing; }
  .archive-sheet__handle{
    height: 28px; display: grid; place-items: center; cursor: grab;
    touch-action: none;
  }
  .archive-sheet__handle::before{
    content:""; width:44px; height:4px; border-radius:999px;
    background: rgba(255,255,255,.25);
  }
  .archive-sheet__close{
    position: absolute; right: 8px; top: 6px;
    width: 36px; height: 36px; display:grid; place-items:center;
    border-radius: 8px; background: transparent; color: #fff; border: 0; cursor: pointer;
  }
  .archive-sheet__close:focus-visible{
    outline: 2px solid var(--gold-600,#E0A402); outline-offset: 2px;
  }
  .archive-sheet__title{
    margin: 0 0 6px; padding: 0 14px;
    font-size: 1.05rem; line-height: 1.25; color:#fff;
  }
  .archive-sheet__content{
    padding: 0 14px 12px; overflow: auto;
  }
  .archive-sheet__content .item-summary{
    font-size: clamp(.88rem, .4vw + .8rem, .95rem);
    line-height: 1.45; opacity: .95;
  }
  .archive-sheet__ctas{
    display:flex; flex-wrap:wrap; gap:8px;
    padding: 16px 14px 14px; border-top:1px solid rgba(255,255,255,.08);
  }
  .archive-sheet.is-open{ transform: translateY(0%); }
  .archive-sheet-backdrop.is-open{ opacity: 1; pointer-events: auto; }
}
/* ============================================================
   Fine regole mobile
   ============================================================ */