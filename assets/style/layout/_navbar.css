/* Navbar */
.nav{
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: var(--z-nav);
  background: rgba(25,26,35,0.38);
  -webkit-backdrop-filter: blur(10px) saturate(1.4);
  backdrop-filter: blur(10px) saturate(1.4);
  box-shadow: var(--shadow-nav);
  transition: box-shadow var(--dur-2) var(--ease-standard),
              background-color var(--dur-2) var(--ease-standard);
}
.nav.is-scrolled{
  box-shadow: var(--shadow-nav-strong);
  background: rgba(25,26,35,0.42);
}
.nav__inner{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding: 10px var(--container-pad-x);
}
.brand{
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  text-decoration: none;
  color: inherit;
}
.brand__name{
  font-weight: var(--fw-bold);
  letter-spacing: 0.2px;
}
.brand__name:hover{
  text-shadow: 0 0 4px var(--teal-300);
}
.nav__toggle{
  display: inline-flex;
  flex-direction: column;
  gap: 4px;
  background: transparent;
  border: 0;
  padding: 8px;
  border-radius: var(--radius-s);
  cursor: pointer;
}
.nav__toggle-bar{
  width: 22px; height: 2px;
  background: #fff; opacity: 0.9;
  border-radius: 1px;
}

/* Menu collassato mobile/tablet */
.nav__menu{
  display: block; width: 100%;
  max-height: 0; overflow: hidden;
  opacity: 0; visibility: hidden;
  transition:
    max-height var(--dur-2) var(--ease-standard),
    opacity var(--dur-2) var(--ease-standard),
    visibility var(--dur-2) step-end;
  will-change: max-height, opacity;
}
.nav.is-open .nav__menu{
  max-height: 520px; opacity: 1; visibility: visible;
  transition:
    max-height var(--dur-2) var(--ease-standard),
    opacity var(--dur-2) var(--ease-standard),
    visibility 0s step-start;
}
.nav__list{
  list-style: none; margin: 8px 0 0; padding: 0;
  display: grid; gap: 6px;
}
.nav__item{ list-style: none; }
.nav__link{
  display: block; padding: 10px 8px;
  color: #fff; text-decoration: none; border-radius: 8px;
}
.nav__link:hover{ background: rgba(255,255,255,0.06); }
.nav__link:focus-visible{ outline: 2px solid var(--gold-600); outline-offset: 2px; }
.nav__cta{ margin: 10px 0 2px; display: grid; justify-content: start; }

/* Mobile/tablet menu sospeso a destra */
@media (max-width: 1023.98px){
  .nav__inner{ position: relative; }
  .nav__menu{
    position: absolute; top: 100%;
    right: var(--container-pad-x); left: auto;
    width: clamp(170px, 42vw, 220px); text-align: right;
    background: color-mix(in oklab, #0F1120 86%, #FFFFFF 14%);
    -webkit-backdrop-filter: blur(12px) saturate(1.4);
    backdrop-filter: blur(12px) saturate(1.4);
    border: 1px solid rgba(255,255,255,0.14);
    border-radius: 12px;
    box-shadow: 0 12px 28px rgba(0,0,0,0.28);
    padding: 10px;
    transform-origin: top right; transform: translateY(-6px);
    transition:
      max-height var(--dur-2) var(--ease-standard),
      opacity var(--dur-2) var(--ease-standard),
      visibility var(--dur-2) step-end,
      transform var(--dur-2) var(--ease-standard);
  }
  .nav.is-open .nav__menu{
    transform: translateY(0);
    transition:
      max-height var(--dur-2) var(--ease-standard),
      opacity var(--dur-2) var(--ease-standard),
      visibility 0s step-start,
      transform var(--dur-2) var(--ease-standard);
  }
  .nav__list{ justify-items: center; margin: 0; padding: 6px; }
  .nav__link{ padding-right: 12px; }
  .nav__cta{ margin: 8px 6px 2px; justify-content: center; }
}

/* Backdrop per chiusura su tap fuori (inserito da JS) */
.nav__backdrop {
  position: fixed; inset: 0;
  background: transparent; z-index: 999; pointer-events: auto;
}

/* Desktop: elenco orizzontale */
@media (min-width: 1024px){
  .nav__toggle{ display: none; }
  .nav__menu{
    position: static; width: auto; display: flex; align-items: center; gap: 16px;
    max-height: none !important; opacity: 1 !important; visibility: visible !important;
    background: transparent; border: 0; box-shadow: none; padding: 0; transform: none !important;
  }
  .nav__list{ display: flex; align-items: center; gap: 12px; margin: 0; }
  .nav__link{ padding: 8px 10px; border-radius: 6px; }
  .nav__cta{ margin: 0 0 0 6px; display: block; }
}

/* Micro padding per breakpoint */
@media (min-width: 768px){
  .nav__inner{ padding: 12px calc(var(--container-pad-x) + 4px); }
}
@media (min-width: 1024px){
  .nav__inner{ padding: 14px calc(var(--container-pad-x) + 8px); }
}
@media (min-width: 1280px){
  :root{ --container-max: 1200px; }
}
@media (min-width: 1536px){
  :root{ --container-max: 1320px; }
}
